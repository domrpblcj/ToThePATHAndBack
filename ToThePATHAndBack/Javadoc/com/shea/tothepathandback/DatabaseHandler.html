<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.6.0_30) on Tue Mar 18 15:16:05 EDT 2014 -->
<title>DatabaseHandler</title>
<meta name="date" content="2014-03-18">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DatabaseHandler";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DatabaseHandler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/shea/tothepathandback/DatabaseContract.StationEntry.html" title="class in com.shea.tothepathandback"><span class="strong">PREV CLASS</span></a></li>
<li><a href="../../../com/shea/tothepathandback/Directions.html" title="class in com.shea.tothepathandback"><span class="strong">NEXT CLASS</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/shea/tothepathandback/DatabaseHandler.html" target="_top">FRAMES</a></li>
<li><a href="DatabaseHandler.html" target="_top">NO FRAMES</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>SUMMARY:&nbsp;</li>
<li>NESTED&nbsp;|&nbsp;</li>
<li><a href="#field_summary">FIELD</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">CONSTR</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">METHOD</a></li>
</ul>
<ul class="subNavList">
<li>DETAIL:&nbsp;</li>
<li><a href="#field_detail">FIELD</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">CONSTR</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">METHOD</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<p class="subTitle">com.shea.tothepathandback</p>
<h2 title="Class DatabaseHandler" class="title">Class DatabaseHandler</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>SQLiteOpenHelper</li>
<li>
<ul class="inheritance">
<li>com.shea.tothepathandback.DatabaseHandler</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <strong>DatabaseHandler</strong>
extends SQLiteOpenHelper</pre>
<div class="block">Handles all the necessary steps to create, open, update, and save the databases necessary for 
 this project. It will open a database file already available in the project's assets folder, and 
 will save that file as well in to the app's data folder on the device. The necessary queries to 
 obtain the stations and their entrances are also available as methods here.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>shea</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private Context</code></td>
<td class="colLast"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#c">c</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#DATABASE_NAME">DATABASE_NAME</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#DATABASE_VERSION">DATABASE_VERSION</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#databasePath">databasePath</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private SQLiteDatabase</code></td>
<td class="colLast"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#db">db</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#KEY_DB_VER">KEY_DB_VER</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#DatabaseHandler(Context)">DatabaseHandler</a></strong>(Context&nbsp;context)</code>
<div class="block">Constructor for our database handler.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#checkDatabase()">checkDatabase</a></strong>()</code>
<div class="block">Using the database path created in the constructor, determine if database already exists on file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#copyDatabase()">copyDatabase</a></strong>()</code>
<div class="block">Attempts to use a stream buffer to input database from asserts file, create 
 the permanent file in the data folder stored on the user's device, and write 
 from the buffer to the file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#createDatabase()">createDatabase</a></strong>()</code>
<div class="block">If a database already exists, we'll check if the database has been updated based on the constant 
 DATABASE_VERSION.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/shea/tothepathandback/Entrance.html" title="class in com.shea.tothepathandback">Entrance</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#getAllEntrancesForStation(com.shea.tothepathandback.Station)">getAllEntrancesForStation</a></strong>(<a href="../../../com/shea/tothepathandback/Station.html" title="class in com.shea.tothepathandback">Station</a>&nbsp;s)</code>
<div class="block">Query the entrances tables for all entrances that share their station ID with the unique ID 
 of the passed station.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/shea/tothepathandback/Station.html" title="class in com.shea.tothepathandback">Station</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#getAllStations()">getAllStations</a></strong>()</code>
<div class="block">Query the stations table for all stations, all rows.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/shea/tothepathandback/Station.html" title="class in com.shea.tothepathandback">Station</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#getStation(java.lang.String)">getStation</a></strong>(java.lang.String&nbsp;id)</code>
<div class="block">Queries the station table for the information associated with the given unique station ID</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#onCreate(SQLiteDatabase)">onCreate</a></strong>(SQLiteDatabase&nbsp;db)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#onUpgrade(SQLiteDatabase, int, int)">onUpgrade</a></strong>(SQLiteDatabase&nbsp;db,
         int&nbsp;oldVersion,
         int&nbsp;newVersion)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#openDatabase()">openDatabase</a></strong>()</code>
<div class="block">Create a complete path to database file in app's data folder on device and open it as 
 read only.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DATABASE_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DATABASE_NAME</h4>
<pre>private static&nbsp;java.lang.String DATABASE_NAME</pre>
</li>
</ul>
<a name="DATABASE_VERSION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DATABASE_VERSION</h4>
<pre>private static final&nbsp;int DATABASE_VERSION</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.shea.tothepathandback.DatabaseHandler.DATABASE_VERSION">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="KEY_DB_VER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>KEY_DB_VER</h4>
<pre>private static final&nbsp;java.lang.String KEY_DB_VER</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.shea.tothepathandback.DatabaseHandler.KEY_DB_VER">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="db">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>db</h4>
<pre>private&nbsp;SQLiteDatabase db</pre>
</li>
</ul>
<a name="c">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>c</h4>
<pre>private final&nbsp;Context c</pre>
</li>
</ul>
<a name="databasePath">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>databasePath</h4>
<pre>private&nbsp;java.lang.String databasePath</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DatabaseHandler(Context)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DatabaseHandler</h4>
<pre>public&nbsp;DatabaseHandler(Context&nbsp;context)</pre>
<div class="block">Constructor for our database handler. Saves copy of context from MainActivity and 
 sets the save path for our database file.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>context</code> - - Context from MainActivity that'll be copied here</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="createDatabase()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createDatabase</h4>
<pre>public&nbsp;void&nbsp;createDatabase()
                    throws java.io.IOException</pre>
<div class="block">If a database already exists, we'll check if the database has been updated based on the constant 
 DATABASE_VERSION. If the database version has not changed, then the current database file will open. 
 Else if the database version has changed, the saved file will be deleted. Finally, if the old database 
 file was deleted or a database never existed, a new one will be saved based on what is read from the 
 one stored in our assets folder.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - - Error copying database</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/shea/tothepathandback/DatabaseHandler.html#checkDatabase()"><code>checkDatabase()</code></a>, 
<a href="../../../com/shea/tothepathandback/DatabaseHandler.html#copyDatabase()"><code>copyDatabase()</code></a>, 
<a href="../../../com/shea/tothepathandback/DatabaseHandler.html#openDatabase()"><code>openDatabase()</code></a></dd></dl>
</li>
</ul>
<a name="checkDatabase()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkDatabase</h4>
<pre>private&nbsp;boolean&nbsp;checkDatabase()</pre>
<div class="block">Using the database path created in the constructor, determine if database already exists on file.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="copyDatabase()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>copyDatabase</h4>
<pre>private&nbsp;void&nbsp;copyDatabase()
                   throws java.io.IOException</pre>
<div class="block">Attempts to use a stream buffer to input database from asserts file, create 
 the permanent file in the data folder stored on the user's device, and write 
 from the buffer to the file. Will also save database version.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if stream cannot be opened</dd></dl>
</li>
</ul>
<a name="openDatabase()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openDatabase</h4>
<pre>public&nbsp;void&nbsp;openDatabase()</pre>
<div class="block">Create a complete path to database file in app's data folder on device and open it as 
 read only. Saved in SQLiteDatabase field.</div>
</li>
</ul>
<a name="onCreate(SQLiteDatabase)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onCreate</h4>
<pre>public&nbsp;void&nbsp;onCreate(SQLiteDatabase&nbsp;db)</pre>
</li>
</ul>
<a name="onUpgrade(SQLiteDatabase, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onUpgrade</h4>
<pre>public&nbsp;void&nbsp;onUpgrade(SQLiteDatabase&nbsp;db,
             int&nbsp;oldVersion,
             int&nbsp;newVersion)</pre>
</li>
</ul>
<a name="getStation(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStation</h4>
<pre>public&nbsp;<a href="../../../com/shea/tothepathandback/Station.html" title="class in com.shea.tothepathandback">Station</a>&nbsp;getStation(java.lang.String&nbsp;id)</pre>
<div class="block">Queries the station table for the information associated with the given unique station ID</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - - Unique station identification</dd>
<dt><span class="strong">Returns:</span></dt><dd>Station object with same unique ID</dd></dl>
</li>
</ul>
<a name="getAllStations()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllStations</h4>
<pre>public&nbsp;<a href="../../../com/shea/tothepathandback/Station.html" title="class in com.shea.tothepathandback">Station</a>[]&nbsp;getAllStations()</pre>
<div class="block">Query the stations table for all stations, all rows.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Station array of all in stations table</dd></dl>
</li>
</ul>
<a name="getAllEntrancesForStation(com.shea.tothepathandback.Station)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getAllEntrancesForStation</h4>
<pre>public&nbsp;<a href="../../../com/shea/tothepathandback/Entrance.html" title="class in com.shea.tothepathandback">Entrance</a>[]&nbsp;getAllEntrancesForStation(<a href="../../../com/shea/tothepathandback/Station.html" title="class in com.shea.tothepathandback">Station</a>&nbsp;s)</pre>
<div class="block">Query the entrances tables for all entrances that share their station ID with the unique ID 
 of the passed station.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>s</code> - - Station used for query</dd>
<dt><span class="strong">Returns:</span></dt><dd>array of Entrances corresponding to the passed Station based on station ID</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DatabaseHandler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/shea/tothepathandback/DatabaseContract.StationEntry.html" title="class in com.shea.tothepathandback"><span class="strong">PREV CLASS</span></a></li>
<li><a href="../../../com/shea/tothepathandback/Directions.html" title="class in com.shea.tothepathandback"><span class="strong">NEXT CLASS</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/shea/tothepathandback/DatabaseHandler.html" target="_top">FRAMES</a></li>
<li><a href="DatabaseHandler.html" target="_top">NO FRAMES</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>SUMMARY:&nbsp;</li>
<li>NESTED&nbsp;|&nbsp;</li>
<li><a href="#field_summary">FIELD</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">CONSTR</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">METHOD</a></li>
</ul>
<ul class="subNavList">
<li>DETAIL:&nbsp;</li>
<li><a href="#field_detail">FIELD</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">CONSTR</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">METHOD</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
